<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>8.11_ECMAScript6Func</title>
    <script>
        // 8.11 ECMAScript6부터 추가된 함수의 기능
        // 8.11.1 화살표 함수 표선식으로 함수 정의하기
        // 화살표 함수 표현식은 함수 리터럴의 단축표현. 함수리터럴과 완전히 같은 건 아니므로 주의해야함

        var square = function(x){return x*x;};
        // 화살표 함수 표현방법
        var square = (x) => {return x*x;};
        // 여러개 인수일 경우 쉼표로 구분
        var f = (x,y,z) => {return "";};
        // 인수가 하나만 있으면 괄호 생략 가능
        var square = x => {return x*x;};
        // 인수가 없으면 인수를 묶는 괄표 생략 불가
        var f = () => {return ""};
        // 함수의 몸통 문장이 return뿐이면 중괄호와 return키워드 생략가능
        var square = x =>  x*x;
        // 함수 몸통 안에 return 문장만 있더라도 함수의 반환값이 객체 리터럴이면 객체 리터럴을 그룹 연산자인 () 묶어야함
        var f = (a,b)=> ({x:a, y:b});
        // 화살표 함수도 즉시 실행 함수로 사용할 수 있음
        (x => x*x)(3);

        // 함수리터럴과 화살표 함수의 차이점
        // 1. this의 값이 함수를 정의할 때 결정 - 화살표 함수 바깥의 this 값이 화살표 함수의 this 값이 됨
        // f는 say라는 함수의 중첩 함수, this의 값은 전역 객체를 가리킴. 화살표 함수 g의 this 값은 함수 g를 정의한 익명 함수의
        // this값인 객체 obj를 가리킴. 화살표 함수는 call이나 apply 메서드를 사용하여 this를 바꾸어 호출해도 this 값이 바뀌지 않음
        var obj = {
            say: function(){
                console.log(this);
                var f = function(){console.log(this);};
                f();
                var g = () => console.log(this);
                g();
            }
        }
        obj.say();

        var f = function(){console.log(this.name);};
        var g = () => console.log(this.name);
        var tom = {name:"Tom"};
        f.call(tom);
        g.call(tom);
    </script>
</head>
<body>
</body>
</html>